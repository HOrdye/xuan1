<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•…äº‹å¡”ç½—ç‰Œå›¾ç‰‡æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 2px solid transparent;
        }
        .card-image.loaded {
            border-color: #4CAF50;
        }
        .card-image.error {
            border-color: #f44336;
            background: #ffebee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #d32f2f;
            font-weight: bold;
        }
        .card-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        .card-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        .card-path {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6);
            word-break: break-all;
        }
        .section-title {
            font-size: 1.5em;
            margin: 30px 0 20px 0;
            text-align: center;
            color: #FFD700;
        }
        .error-list {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid rgba(244, 67, 54, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .error-item {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(244, 67, 54, 0.2);
            border-radius: 5px;
        }
        .success {
            color: #4CAF50;
        }
        .error {
            color: #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ´ æ•…äº‹å¡”ç½—ç‰Œå›¾ç‰‡åŠ è½½æµ‹è¯•</h1>
            <p>æµ‹è¯• storyTarotData.ts ä¸­çš„å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalCards">0</div>
                <div>æ€»å¡ç‰Œæ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number success" id="loadedCount">0</div>
                <div>åŠ è½½æˆåŠŸ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number error" id="errorCount">0</div>
                <div>åŠ è½½å¤±è´¥</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="successRate">0%</div>
                <div>æˆåŠŸç‡</div>
            </div>
        </div>

        <div class="section-title">ğŸƒ å¤§é˜¿å°”å¡çº³ (Major Arcana)</div>
        <div class="cards-grid" id="majorCards"></div>

        <div class="section-title">ğŸ´ å°é˜¿å°”å¡çº³ - æƒæ– (Wands)</div>
        <div class="cards-grid" id="wandsCards"></div>

        <div class="section-title">ğŸ´ å°é˜¿å°”å¡çº³ - åœ£æ¯ (Cups)</div>
        <div class="cards-grid" id="cupsCards"></div>

        <div class="section-title">ğŸ´ å°é˜¿å°”å¡çº³ - å®å‰‘ (Swords)</div>
        <div class="cards-grid" id="swordsCards"></div>

        <div class="section-title">ğŸ´ å°é˜¿å°”å¡çº³ - æ˜Ÿå¸ (Pentacles)</div>
        <div class="cards-grid" id="pentaclesCards"></div>

        <div id="errorSection" style="display: none;">
            <div class="section-title error">âŒ åŠ è½½å¤±è´¥çš„å¡ç‰Œ</div>
            <div class="error-list" id="errorList"></div>
        </div>
    </div>

    <script type="module">
        // å¯¼å…¥æ•…äº‹å¡”ç½—ç‰Œæ•°æ®
        import { storyTarotDeck } from './src/features/tarot/utils/storyTarotData.ts';

        let loadedCount = 0;
        let errorCount = 0;
        const errorCards = [];

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('totalCards').textContent = storyTarotDeck.length;
            document.getElementById('loadedCount').textContent = loadedCount;
            document.getElementById('errorCount').textContent = errorCount;
            
            const successRate = storyTarotDeck.length > 0 ? 
                Math.round((loadedCount / storyTarotDeck.length) * 100) : 0;
            document.getElementById('successRate').textContent = successRate + '%';
        }

        // åˆ›å»ºå¡ç‰Œå…ƒç´ 
        function createCardElement(card) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'card';
            
            const img = document.createElement('img');
            img.className = 'card-image';
            img.src = card.imageUrl;
            img.alt = card.chineseName;
            
            img.onload = function() {
                this.classList.add('loaded');
                loadedCount++;
                updateStats();
            };
            
            img.onerror = function() {
                this.classList.add('error');
                this.style.display = 'flex';
                this.textContent = 'å›¾ç‰‡åŠ è½½å¤±è´¥';
                errorCount++;
                errorCards.push({
                    id: card.id,
                    name: card.chineseName,
                    path: card.imageUrl
                });
                updateStats();
                showErrors();
            };
            
            cardDiv.innerHTML = `
                <div class="card-title">${card.chineseName}</div>
                <div class="card-subtitle">${card.name}</div>
                <div class="card-path">${card.imageUrl}</div>
            `;
            
            cardDiv.insertBefore(img, cardDiv.firstChild);
            return cardDiv;
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showErrors() {
            if (errorCards.length > 0) {
                document.getElementById('errorSection').style.display = 'block';
                const errorList = document.getElementById('errorList');
                errorList.innerHTML = errorCards.map(card => `
                    <div class="error-item">
                        <strong>ID ${card.id}: ${card.name}</strong><br>
                        è·¯å¾„: ${card.path}
                    </div>
                `).join('');
            }
        }

        // æŒ‰ç±»åˆ«åˆ†ç»„å¡ç‰Œ
        function groupCards() {
            const groups = {
                major: [],
                wands: [],
                cups: [],
                swords: [],
                pentacles: []
            };

            storyTarotDeck.forEach(card => {
                if (card.category === 'major') {
                    groups.major.push(card);
                } else if (card.suit) {
                    groups[card.suit].push(card);
                }
            });

            return groups;
        }

        // æ¸²æŸ“å¡ç‰Œ
        function renderCards() {
            const groups = groupCards();
            
            // æ¸²æŸ“å„ä¸ªåˆ†ç»„
            Object.keys(groups).forEach(groupName => {
                const container = document.getElementById(groupName + 'Cards');
                if (container) {
                    groups[groupName]
                        .sort((a, b) => a.id - b.id)
                        .forEach(card => {
                            container.appendChild(createCardElement(card));
                        });
                }
            });
        }

        // åˆå§‹åŒ–
        console.log('æ•…äº‹å¡”ç½—ç‰Œæ•°æ®:', storyTarotDeck);
        console.log('æ€»å¡ç‰Œæ•°:', storyTarotDeck.length);
        
        updateStats();
        renderCards();

        // 5ç§’åæ˜¾ç¤ºæœ€ç»ˆç»Ÿè®¡
        setTimeout(() => {
            console.log('=== æœ€ç»ˆç»Ÿè®¡ ===');
            console.log('æ€»å¡ç‰Œæ•°:', storyTarotDeck.length);
            console.log('åŠ è½½æˆåŠŸ:', loadedCount);
            console.log('åŠ è½½å¤±è´¥:', errorCount);
            console.log('æˆåŠŸç‡:', Math.round((loadedCount / storyTarotDeck.length) * 100) + '%');
            
            if (errorCards.length > 0) {
                console.log('å¤±è´¥çš„å¡ç‰Œ:', errorCards);
            } else {
                console.log('ğŸ‰ æ‰€æœ‰å›¾ç‰‡éƒ½åŠ è½½æˆåŠŸï¼');
            }
        }, 5000);
    </script>
</body>
</html> 