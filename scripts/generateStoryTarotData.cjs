const fs = require('fs');
const path = require('path');

// å¤§é˜¿å°”å¡çº³çš„æ•…äº‹åŒ–è§£è¯»
const majorArcanaStories = {
  0: "å¹´è½»çš„æ—…äººèƒŒèµ·è¡Œå›Šï¼Œç«™åœ¨æ‚¬å´–è¾¹ï¼Œè„šä¸‹æ˜¯æœªçŸ¥çš„ä¸–ç•Œï¼Œå¿ƒä¸­æ»¡æ˜¯å¯¹æœªæ¥çš„æ†§æ†¬ä¸å‹‡æ°”ã€‚",
  1: "æ¡Œä¸Šå››å…ƒç´ é½èšï¼Œé­”æœ¯å¸ˆæŒ¥åŠ¨æƒæ–ï¼Œå°†æƒ³è±¡å˜ä¸ºç°å®ï¼Œä¸‡ç‰©çš†æœ‰å¯èƒ½ã€‚",
  2: "æœˆå…‰ä¸‹çš„ç¥åº™é™è°§æ— å£°ï¼Œå¥³ç¥­å¸å®ˆæŠ¤ç€ç§˜å¯†ï¼Œç›´è§‰å¼•é¢†ä½ èµ°å‘å†…å¿ƒæ·±å¤„ã€‚",
  3: "èŠ±å›­ä¸­ç¹èŠ±ç››å¼€ï¼Œçš‡åæ¸©æŸ”åœ°å®ˆæŠ¤ç€ç”Ÿå‘½çš„æˆé•¿ï¼Œä¸°é¥¶ä¸çˆ±æ„åœ¨å¥¹çš„æ€€æŠ±ä¸­æµæ·Œã€‚",
  4: "åšå®çš„ç‹åº§ä¸Šï¼Œçš‡å¸ç›®å…‰åšå®šï¼Œæƒæ–åœ¨æ‰‹ï¼Œä»–ç”¨ç§©åºä¸è§„åˆ™å®ˆæŠ¤ç€è‡ªå·±çš„ç–†åœŸã€‚",
  5: "å¤è€çš„ç¥æ®¿é‡Œï¼Œæ•™çš‡ä¼ é€’ç€æ™ºæ…§ä¸ä¿¡ä»°ï¼Œä¼ ç»Ÿçš„åŠ›é‡åœ¨ä»ªå¼ä¸­å»¶ç»­ã€‚",
  6: "ä¸¤é¢—å¿ƒåœ¨èŠ±å›­ä¸­ç›¸é‡ï¼Œé¢å¯¹é€‰æ‹©ï¼Œçˆ±ä¸è´£ä»»äº¤ç»‡ï¼Œå‘½è¿çš„åˆ†å²”è·¯å£ç­‰å¾…ä½ çš„å†³å®šã€‚",
  7: "é©¾é©­é»‘ç™½åŒé©¬ï¼Œç©¿è¶Šé£æš´ï¼Œå”¯æœ‰åšå®šçš„æ„å¿—èƒ½æŠµè¾¾èƒœåˆ©çš„å½¼å²¸ã€‚",
  8: "å°‘å¥³æ¸©æŸ”åœ°æŠšæ‘¸ç€ç‹®å­çš„é¬ƒæ¯›ï¼ŒæŸ”å’Œçš„åŠ›é‡èƒœè¿‡ä¸€åˆ‡è›®åŠ›ï¼Œå‹‡æ°”æºè‡ªå†…å¿ƒçš„å¹³é™ã€‚",
  9: "å¤œè‰²ä¸­ï¼Œéšè€…ä¸¾èµ·ç¯ç¬¼ï¼Œç‹¬è‡ªè¸ä¸Šå¯»æ‰¾çœŸç†çš„æ—…é€”ï¼Œæ™ºæ…§åœ¨å­¤ç‹¬ä¸­é—ªé—ªå‘å…‰ã€‚",
  10: "å·¨å¤§çš„è½®ç›˜åœ¨å¤©ç©ºä¸­è½¬åŠ¨ï¼Œå‘½è¿çš„é½¿è½®å’”åš“ä½œå“ï¼Œå˜åŒ–å³å°†åˆ°æ¥ï¼Œæœºé‡ä¸æŒ‘æˆ˜å¹¶å­˜ã€‚",
  11: "å¤©å¹³åœ¨æ­£ä¹‰å¥³ç¥æ‰‹ä¸­ä¿æŒå¹³è¡¡ï¼ŒçœŸç›¸çš„åˆ©å‰‘åˆ’ç ´è¿·é›¾ï¼Œå…¬æ­£å°†å¾—åˆ°ä¼¸å¼ ã€‚",
  12: "å€’æ‚¬çš„æ™ºè€…åœ¨æ ‘ä¸Šæ²‰æ€ï¼Œæ¢ä¸ªè§’åº¦çœ‹ä¸–ç•Œï¼Œç‰ºç‰²ä¸ç­‰å¾…ä¸­è•´å«ç€æ·±åˆ»çš„é¢†æ‚Ÿã€‚",
  13: "æ­»ç¥éª‘ç€ç™½é©¬ç¼“ç¼“èµ°æ¥ï¼Œä¸æ˜¯ç»ˆç»“è€Œæ˜¯è½¬åŒ–ï¼Œæ—§çš„æ¶ˆé€ä¸ºæ–°çš„è¯ç”Ÿè®©è·¯ã€‚",
  14: "å¤©ä½¿åœ¨æºªæ°´è¾¹è°ƒå’Œä¸¤å£¶æ¸…æ³‰ï¼Œå¹³è¡¡ä¸è€å¿ƒè®©ä½ åœ¨çº·æ‰°ä¸­æ‰¾åˆ°å†…å¿ƒçš„å®‰å®ã€‚",
  15: "æ¶é­”çš„é”é“¾çœ‹ä¼¼ç‰¢å›ºï¼Œå®åˆ™è™šå¹»ï¼ŒæŸç¼šä½ çš„å¾€å¾€æ˜¯å†…å¿ƒçš„ææƒ§ä¸æ¬²æœ›ã€‚",
  16: "é«˜å¡”åœ¨é›·ç”µä¸­è½°ç„¶å€’å¡Œï¼Œè™šå‡çš„æ ¹åŸºè¢«æ‘§æ¯ï¼ŒçœŸç›¸åœ¨åºŸå¢Ÿä¸­é‡æ–°å»ºç«‹ã€‚",
  17: "æ˜Ÿå…‰æ´’å‘å¤§åœ°ï¼Œå°‘å¥³åœ¨æ± è¾¹å€’æ°´ï¼Œå¸Œæœ›å¦‚ç”˜éœ²èˆ¬æ»‹æ¶¦ç€å¹²æ¶¸çš„å¿ƒç”°ã€‚",
  18: "æœˆäº®é«˜æ‚¬ï¼Œç‹¼åšå£°èµ·ï¼Œå¹»è±¡ä¸çœŸå®äº¤ç»‡ï¼Œç›´è§‰åœ¨è¿·é›¾ä¸­æŒ‡å¼•æ–¹å‘ã€‚",
  19: "å¤ªé˜³å‡èµ·ï¼Œå­©ç«¥åœ¨èŠ±å›­ä¸­æ¬¢ç¬‘ï¼Œçº¯çœŸçš„å–œæ‚¦ç…§äº®ä¸€åˆ‡ï¼ŒæˆåŠŸä¸å¹¸ç¦è§¦æ‰‹å¯åŠã€‚",
  20: "å·è§’å“èµ·ï¼Œæ²‰ç¡çš„çµé­‚è‹é†’ï¼Œè¿‡å¾€çš„ç»å†åŒ–ä¸ºè§‰é†’çš„åŠ›é‡ï¼Œè¿æ¥æ–°ç”Ÿã€‚",
  21: "ä½ åœ¨å®‡å®™çš„èˆå°ä¸Šæ—‹è½¬ï¼Œæ—…ç¨‹åœ†æ»¡ï¼Œæ”¶è·å±äºè‡ªå·±çš„è£è€€ä¸è‡ªç”±ã€‚"
};

// å°é˜¿å°”å¡çº³å„èŠ±è‰²çš„æ•…äº‹ä¸»é¢˜
const suitThemes = {
  wands: {
    element: "ç«",
    theme: "æ¿€æƒ…ä¸åˆ›é€ ",
    stories: {
      1: "æƒæ–ä»äº‘ä¸­ä¼¸å‡ºï¼Œæ–°çš„åˆ›æ„å¦‚ç«èŠ±èˆ¬è¿¸å‘ï¼Œè¡ŒåŠ¨çš„æ—¶åˆ»å·²ç»åˆ°æ¥ã€‚",
      2: "ç«™åœ¨åŸå ¡ä¸Šçœºæœ›è¿œæ–¹ï¼Œæ‰‹æ¡æƒæ–ï¼Œä¸–ç•Œåœ¨ä½ çš„æŒæ§ä¹‹ä¸­ï¼Œè®¡åˆ’æ­£åœ¨é…é…¿ã€‚",
      3: "å•†äººæœ›å‘æµ·æ¸¯ï¼Œèˆ¹åªå³å°†å¯èˆªï¼Œåˆä½œä¸æ‰©å±•å¸¦æ¥æ–°çš„æœºé‡ã€‚",
      4: "å››æ ¹æƒæ–æ­å»ºèµ·åº†ç¥çš„æ‹±é—¨ï¼Œå®¶åº­å’Œç¦ï¼Œæˆå°±å€¼å¾—åº†è´ºã€‚",
      5: "äº”ä¸ªå¹´è½»äººæŒ¥èˆæƒæ–ï¼Œç«äº‰æ¿€çƒˆä½†å……æ»¡æ´»åŠ›ï¼Œå†²çªä¸­å­•è‚²ç€æˆé•¿ã€‚",
      6: "éª‘å£«é«˜ä¸¾æƒæ–å‡¯æ—‹å½’æ¥ï¼Œèƒœåˆ©çš„æ¡‚å† æˆ´åœ¨å¤´ä¸Šï¼ŒåŠªåŠ›ç»ˆæœ‰å›æŠ¥ã€‚",
      7: "å±±é¡¶ä¸Šçš„å‹‡å£«æ‰‹æŒæƒæ–ï¼Œé¢å¯¹æŒ‘æˆ˜æ¯«ä¸é€€ç¼©ï¼ŒåšæŒå°±æ˜¯èƒœåˆ©ã€‚",
      8: "å…«æ ¹æƒæ–å¦‚ç®­çŸ¢èˆ¬é£å‘ç›®æ ‡ï¼Œå¿«é€Ÿçš„è¡ŒåŠ¨å¸¦æ¥è¿…çŒ›çš„è¿›å±•ã€‚",
      9: "ä¼¤ç—•ç´¯ç´¯çš„æˆ˜å£«ä¾ç„¶åšå®ˆï¼Œæœ€åçš„é˜²çº¿è€ƒéªŒç€ä½ çš„æ„å¿—ã€‚",
      10: "é‡æ‹…å‹èº«ä½†ç›®æ ‡åœ¨æœ›ï¼Œæ‰¿æ‹…è´£ä»»è™½ç„¶è¾›è‹¦ï¼ŒæˆåŠŸå°±åœ¨å‰æ–¹ã€‚",
      11: "æƒæ–éª‘å£«ç­–é©¬å¥”è…¾ï¼Œå†²åŠ¨ä¸çƒ­æƒ…é©±ä½¿ç€å‰è¿›çš„æ­¥ä¼ã€‚",
      12: "æƒæ–ç‹åæ‰‹æŒå‘æ—¥è‘µï¼Œæ¸©æš–çš„èƒ½é‡æ„ŸæŸ“ç€å‘¨å›´çš„ä¸€åˆ‡ã€‚",
      13: "æƒæ–å›½ç‹ååœ¨ç«ç„°ç‹åº§ä¸Šï¼Œé¢†å¯¼åŠ›ä¸è¿œè§æŒ‡å¼•ç€å›¢é˜Ÿå‰è¿›ã€‚",
      14: "æƒæ–ä¾ä»æ‰‹æŒå«©ç»¿çš„æƒæ–ï¼Œæ–°çš„æƒ³æ³•å¦‚æ˜¥èŠ½èˆ¬ç ´åœŸè€Œå‡ºã€‚"
    }
  },
  cups: {
    element: "æ°´",
    theme: "æƒ…æ„Ÿä¸ç›´è§‰",
    stories: {
      1: "åœ£æ¯ä»äº‘ä¸­é™ä¸‹ï¼Œçˆ±ä¸çµæ„Ÿå¦‚ç”˜éœ²èˆ¬æ³¨å…¥å¿ƒç”°ï¼Œæƒ…æ„Ÿçš„æ–°ç¯‡ç« å¼€å¯ã€‚",
      2: "ä¸¤äººä¸¾æ¯ç›¸å¯¹ï¼Œå¿ƒçµçš„äº¤æµè¶…è¶Šè¨€è¯­ï¼ŒçœŸæŒšçš„æƒ…æ„Ÿåœ¨æ­¤åˆ»ç»½æ”¾ã€‚",
      3: "ä¸‰ä¸ªæœ‹å‹ä¸¾æ¯åº†ç¥ï¼Œå‹è°Šçš„æ¸©æš–å¦‚é˜³å…‰èˆ¬æ´’å‘å¤§åœ°ã€‚",
      4: "æ ‘ä¸‹æ²‰æ€çš„äººå¯¹çœ¼å‰çš„åœ£æ¯è§†è€Œä¸è§ï¼Œå†…å¿ƒçš„ä¸æ»¡éœ€è¦æ–°çš„è§†è§’ã€‚",
      5: "ä¸‰æ¯å€¾å€’ï¼Œä¸¤æ¯ä¾ç„¶æŒºç«‹ï¼Œå¤±å»ä¸­è•´å«ç€å¸Œæœ›ï¼Œæ‚²ä¼¤ç»ˆå°†è¿‡å»ã€‚",
      6: "å­©ç«¥åœ¨èŠ±å›­ä¸­å¬‰æˆï¼Œçº¯çœŸçš„å¿«ä¹å”¤èµ·å¿ƒä¸­æœ€ç¾å¥½çš„å›å¿†ã€‚",
      7: "äº‘ä¸­æµ®ç°ä¸ƒä¸ªåœ£æ¯ï¼Œå¹»æƒ³ä¸ç°å®äº¤ç»‡ï¼Œé€‰æ‹©éœ€è¦æ¸…é†’çš„å¤´è„‘ã€‚",
      8: "èƒŒå½±æ¸è¡Œæ¸è¿œï¼Œå…«ä¸ªåœ£æ¯è¢«æŠ›åœ¨èº«åï¼Œå¯»æ‰¾æ›´é«˜å±‚æ¬¡çš„æ»¡è¶³ã€‚",
      9: "æ»¡è¶³çš„å•†äººååœ¨ä¹ä¸ªåœ£æ¯å‰ï¼Œæ„¿æœ›æˆçœŸï¼Œå†…å¿ƒå……æ»¡æ„Ÿæ©ã€‚",
      10: "å½©è™¹ä¸‹çš„å®¶åº­å…¶ä¹èèï¼Œåä¸ªåœ£æ¯è±¡å¾ç€æƒ…æ„Ÿçš„åœ†æ»¡ä¸å¹¸ç¦ã€‚",
      11: "åœ£æ¯éª‘å£«æ‰‹æŒåœ£æ¯ï¼Œæµªæ¼«çš„ç†æƒ³ä¸»ä¹‰é©±ä½¿ç€è¿½æ±‚å®Œç¾çš„çˆ±ã€‚",
      12: "åœ£æ¯ç‹åååœ¨æµ·è¾¹ï¼Œç›´è§‰å¦‚æ½®æ°´èˆ¬æ¶Œæ¥ï¼Œæƒ…æ„Ÿçš„æ™ºæ…§æŒ‡å¼•æ–¹å‘ã€‚",
      13: "åœ£æ¯å›½ç‹åœ¨æ³¢æ¶›ä¸­ä¿æŒå¹³é™ï¼Œæƒ…æ„Ÿçš„æˆç†Ÿå¸¦æ¥å†…å¿ƒçš„å®‰å®ã€‚",
      14: "åœ£æ¯ä¾ä»æ‰‹æ§åœ£æ¯ï¼Œçº¯çœŸçš„å¿ƒçµå¦‚æ¸…æ³‰èˆ¬é€æ˜æ— ç‘•ã€‚"
    }
  },
  swords: {
    element: "é£",
    theme: "æ€ç»´ä¸æŒ‘æˆ˜",
    stories: {
      1: "åˆ©å‰‘åˆºç ´äº‘å±‚ï¼ŒçœŸç›¸å¦‚é—ªç”µèˆ¬åˆ’ç ´é»‘æš—ï¼Œæ¸…æ™°çš„æ€ç»´å¸¦æ¥çªç ´ã€‚",
      2: "è’™çœ¼çš„å¥³å­æ‰‹æŒåŒå‰‘ï¼Œåœ¨è¿·èŒ«ä¸­å¯»æ‰¾å¹³è¡¡ï¼Œå†³å®šéœ€è¦å†…å¿ƒçš„å£°éŸ³ã€‚",
      3: "å¿ƒè„è¢«ä¸‰å‰‘åˆºç©¿ï¼Œç—›è‹¦è™½ç„¶æ·±åˆ»ï¼Œä½†æ²»æ„ˆçš„è¿‡ç¨‹å·²ç»å¼€å§‹ã€‚",
      4: "éª‘å£«åœ¨çŸ³æ£ºä¸Šå®‰æ¯ï¼Œæš‚æ—¶çš„ä¼‘æ¯ä¸ºä¸‹ä¸€æ¬¡æˆ˜æ–—ç§¯è“„åŠ›é‡ã€‚",
      5: "èƒœåˆ©è€…æ”¶é›†è´¥è€…çš„å‰‘ï¼Œå†²çªçš„ä»£ä»·æ²‰é‡ï¼Œåæ€æ¯”èƒœåˆ©æ›´é‡è¦ã€‚",
      6: "èˆ¹å¤«è½½ç€ä¹˜å®¢æ¸¡è¿‡å¹³é™çš„æ°´é¢ï¼Œå›°å¢ƒæ­£åœ¨è¿œå»ï¼Œå¹³é™å³å°†åˆ°æ¥ã€‚",
      7: "å°å·åœ¨å¤œè‰²ä¸­æ½œè¡Œï¼Œç­–ç•¥ä¸æŠ€å·§æœ‰æ—¶æ¯”æ­£é¢å¯¹æŠ—æ›´æœ‰æ•ˆã€‚",
      8: "è¢«å‰‘å›´å›°çš„å¥³å­ï¼ŒæŸç¼šå¾€å¾€æ¥è‡ªå†…å¿ƒçš„ææƒ§ï¼Œè§£è„±éœ€è¦å‹‡æ°”ã€‚",
      9: "å™©æ¢¦ä¸­æƒŠé†’çš„äººï¼Œç„¦è™‘å¦‚å½±éšå½¢ï¼Œä½†é»æ˜æ€»ä¼šåˆ°æ¥ã€‚",
      10: "èƒŒéƒ¨æ’æ»¡åˆ©å‰‘çš„èº«å½±ï¼ŒèƒŒå›çš„ç—›è‹¦æ·±å…¥éª¨é«“ï¼Œä½†è¿™ä¹Ÿæ˜¯ç»“æŸã€‚",
      11: "å®å‰‘éª‘å£«ç­–é©¬å†²é”‹ï¼Œç†æ™ºä¸å†²åŠ¨å¹¶å­˜ï¼Œè¡ŒåŠ¨éœ€è¦æ™ºæ…§çš„æŒ‡å¼•ã€‚",
      12: "å®å‰‘ç‹åé«˜ä¸¾åˆ©å‰‘ï¼Œç‹¬ç«‹ä¸åšå¼ºæ˜¯å¥¹æœ€ç¾çš„è£…é¥°ã€‚",
      13: "å®å‰‘å›½ç‹ç«¯åç‹åº§ï¼Œå…¬æ­£ä¸æ™ºæ…§æ˜¯ä»–ç»Ÿæ²»çš„åŸºçŸ³ã€‚",
      14: "å®å‰‘ä¾ä»ä¸¾å‰‘å‘å¤©ï¼Œå¹´è½»çš„å¿ƒçµæ¸´æœ›çœŸç†ä¸æ­£ä¹‰ã€‚"
    }
  },
  pentacles: {
    element: "åœŸ",
    theme: "ç‰©è´¨ä¸å®ç°",
    stories: {
      1: "é‡‘å¸ä»äº‘ä¸­æ˜¾ç°ï¼Œæ–°çš„æœºä¼šå¦‚ç§å­èˆ¬è½åœ°ï¼Œç‰©è´¨çš„ä¸°æ”¶å³å°†å¼€å§‹ã€‚",
      2: "æ‚è€è€…æŠ›æ¥ä¸¤æšé‡‘å¸ï¼Œå¹³è¡¡å„ç§è´£ä»»éœ€è¦çµæ´»çš„æŠ€å·§ã€‚",
      3: "å·¥åŒ åœ¨æ•™å ‚ä¸­é›•åˆ»ï¼Œä¸“ä¸šçš„æŠ€èƒ½å¾—åˆ°è®¤å¯ï¼Œåˆä½œå¸¦æ¥æˆåŠŸã€‚",
      4: "å®ˆè´¢å¥´ç´§æŠ±é‡‘å¸ï¼Œè¿‡åº¦çš„ä¿å®ˆå¯èƒ½é”™å¤±æˆé•¿çš„æœºä¼šã€‚",
      5: "é›ªå¤œä¸­çš„ä¹ä¸è·¯è¿‡æ•™å ‚ï¼Œå›°éš¾æ˜¯æš‚æ—¶çš„ï¼Œå¸®åŠ©å°±åœ¨èº«è¾¹ã€‚",
      6: "å•†äººç”¨å¤©å¹³ç§°é‡é‡‘å¸ï¼Œå…¬å¹³çš„äº¤æ˜“å»ºç«‹ä¿¡ä»»çš„åŸºç¡€ã€‚",
      7: "å†œå¤«æœ›ç€èŒ‚ç››çš„è‘¡è„è—¤ï¼Œè€å¿ƒçš„ç­‰å¾…å³å°†è¿æ¥ä¸°æ”¶çš„å­£èŠ‚ã€‚",
      8: "å·¥åŒ ä¸“å¿ƒé›•åˆ»æ˜Ÿå¸ï¼Œç²¾ç›Šæ±‚ç²¾çš„æ€åº¦æ˜¯æˆåŠŸçš„å…³é”®ã€‚",
      9: "è´µå¦‡åœ¨èŠ±å›­ä¸­äº«å—æˆæœï¼Œç‹¬ç«‹ä¸ä¼˜é›…æ˜¯åŠªåŠ›çš„å›æŠ¥ã€‚",
      10: "ä¸‰ä»£åŒå ‚çš„å¯Œè£•å®¶åº­ï¼Œè´¢å¯Œçš„ä¼ æ‰¿éœ€è¦æ™ºæ…§çš„ç®¡ç†ã€‚",
      11: "æ˜Ÿå¸éª‘å£«æ‰‹æŒé‡‘å¸ï¼Œç¨³é‡ä¸å¯é æ˜¯ä»–æœ€å¤§çš„ä¼˜åŠ¿ã€‚",
      12: "æ˜Ÿå¸ç‹åæ‰‹æ§é‡‘å¸ï¼Œæ…·æ…¨ä¸å®ç”¨çš„æ™ºæ…§æŒ‡å¼•ç€ç”Ÿæ´»ã€‚",
      13: "æ˜Ÿå¸å›½ç‹ååœ¨ä¸°é¥¶çš„èŠ±å›­ä¸­ï¼ŒæˆåŠŸä¸æ…·æ…¨æ˜¯ä»–çš„æ ‡å¿—ã€‚",
      14: "æ˜Ÿå¸ä¾ä»ä¸“æ³¨åœ°ç ”ç©¶é‡‘å¸ï¼Œå­¦ä¹ ä¸å®è·µæ˜¯æˆé•¿çš„é˜¶æ¢¯ã€‚"
    }
  }
};

// ç”Ÿæˆå®Œæ•´çš„å¡”ç½—ç‰Œæ•°æ®
function generateStoryTarotData() {
  const cards = [];
  
  // å¤§é˜¿å°”å¡çº³ (0-21)
  const majorArcanaNames = [
    { name: "The Fool", chinese: "æ„šè€…", element: "air" },
    { name: "The Magician", chinese: "é­”æœ¯å¸ˆ", element: "air" },
    { name: "The High Priestess", chinese: "å¥³ç¥­å¸", element: "water" },
    { name: "The Empress", chinese: "çš‡å", element: "earth" },
    { name: "The Emperor", chinese: "çš‡å¸", element: "fire" },
    { name: "The Hierophant", chinese: "æ•™çš‡", element: "earth" },
    { name: "The Lovers", chinese: "æ‹äºº", element: "air" },
    { name: "The Chariot", chinese: "æˆ˜è½¦", element: "water" },
    { name: "Strength", chinese: "åŠ›é‡", element: "fire" },
    { name: "The Hermit", chinese: "éšè€…", element: "earth" },
    { name: "Wheel of Fortune", chinese: "å‘½è¿ä¹‹è½®", element: "fire" },
    { name: "Justice", chinese: "æ­£ä¹‰", element: "air" },
    { name: "The Hanged Man", chinese: "å€’åŠäºº", element: "water" },
    { name: "Death", chinese: "æ­»ç¥", element: "water" },
    { name: "Temperance", chinese: "èŠ‚åˆ¶", element: "fire" },
    { name: "The Devil", chinese: "æ¶é­”", element: "earth" },
    { name: "The Tower", chinese: "å¡”", element: "fire" },
    { name: "The Star", chinese: "æ˜Ÿæ˜Ÿ", element: "air" },
    { name: "The Moon", chinese: "æœˆäº®", element: "water" },
    { name: "The Sun", chinese: "å¤ªé˜³", element: "fire" },
    { name: "Judgement", chinese: "å®¡åˆ¤", element: "fire" },
    { name: "The World", chinese: "ä¸–ç•Œ", element: "earth" }
  ];

  majorArcanaNames.forEach((card, index) => {
    cards.push({
      id: index,
      name: card.name,
      chineseName: card.chinese,
      category: 'major',
      element: card.element,
      storyInterpretation: majorArcanaStories[index],
      keywords: getKeywordsForMajor(index),
      imageUrl: `/static/tarot/- ${index.toString().padStart(2, '0')}_${card.name.toLowerCase().replace(/\s+/g, '_')}_jpg (${card.chinese}).png`
    });
  });

  // å°é˜¿å°”å¡çº³ (22-77)
  const suits = ['wands', 'cups', 'swords', 'pentacles'];
  const suitChinese = { wands: 'æƒæ–', cups: 'åœ£æ¯', swords: 'å®å‰‘', pentacles: 'æ˜Ÿå¸' };
  const numbers = ['Ace', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten', 'Page', 'Knight', 'Queen', 'King'];
  const numbersChinese = ['ç‹ç‰Œ', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'ä¾ä»', 'éª‘å£«', 'ç‹å', 'å›½ç‹'];

  let cardId = 22;
  suits.forEach(suit => {
    numbers.forEach((number, numIndex) => {
      const storyIndex = numIndex + 1; // æ•…äº‹ç´¢å¼•ä»1å¼€å§‹
      cards.push({
        id: cardId,
        name: `${number} of ${suit.charAt(0).toUpperCase() + suit.slice(1)}`,
        chineseName: `${suitChinese[suit]}${numbersChinese[numIndex]}`,
        category: 'minor',
        suit: suit,
        number: numIndex + 1,
        element: getSuitElement(suit),
        storyInterpretation: suitThemes[suit].stories[storyIndex],
        keywords: getKeywordsForMinor(suit, numIndex + 1),
        imageUrl: `/static/tarot/${suit}/${number.toLowerCase()}_of_${suit}.png`
      });
      cardId++;
    });
  });

  return cards;
}

// è·å–å¤§é˜¿å°”å¡çº³å…³é”®è¯
function getKeywordsForMajor(index) {
  const majorKeywords = {
    0: ["æ–°å¼€å§‹", "å†’é™©ç²¾ç¥", "çº¯çœŸ", "è‡ªç”±", "æ— é™å¯èƒ½"],
    1: ["åˆ›é€ åŠ›", "æ„å¿—åŠ›", "æŠ€èƒ½", "å®ç°", "æ²Ÿé€š"],
    2: ["ç›´è§‰", "æ½œæ„è¯†", "ç¥ç§˜", "å†…åœ¨æ™ºæ…§", "ç²¾ç¥"],
    3: ["ä¸°é¥¶", "æ¯æ€§", "åˆ›é€ ", "è‡ªç„¶", "ä¸°æ”¶"],
    4: ["æƒå¨", "ç¨³å®š", "é¢†å¯¼", "ç»“æ„", "çˆ¶æƒ"],
    5: ["ä¼ ç»Ÿ", "ä¿¡ä»°", "æ•™å¯¼", "ç²¾ç¥å¯¼å¸ˆ", "æ™ºæ…§"],
    6: ["çˆ±æƒ…", "å…³ç³»", "é€‰æ‹©", "å’Œè°", "ç»“åˆ"],
    7: ["èƒœåˆ©", "æ„å¿—åŠ›", "æ§åˆ¶", "å‰è¿›", "å†³å¿ƒ"],
    8: ["å†…åœ¨åŠ›é‡", "å‹‡æ°”", "è€å¿ƒ", "è‡ªæ§", "æ¸©æŸ”"],
    9: ["å†…çœ", "å¯»æ‰¾", "æŒ‡å¯¼", "æ™ºæ…§", "å­¤ç‹¬"],
    10: ["å˜åŒ–", "å¾ªç¯", "å‘½è¿", "æœºä¼š", "è½¬æŠ˜"],
    11: ["å…¬æ­£", "å¹³è¡¡", "çœŸç›¸", "æ³•å¾‹", "é“å¾·"],
    12: ["ç‰ºç‰²", "ç­‰å¾…", "æ¢ä½æ€è€ƒ", "æš‚åœ", "é¢†æ‚Ÿ"],
    13: ["è½¬åŒ–", "ç»“æŸ", "é‡ç”Ÿ", "é‡Šæ”¾", "å˜é©"],
    14: ["å¹³è¡¡", "è°ƒå’Œ", "è€å¿ƒ", "æ²»æ„ˆ", "èŠ‚åˆ¶"],
    15: ["æŸç¼š", "è¯±æƒ‘", "ç‰©è´¨ä¸»ä¹‰", "ææƒ§", "ä¾èµ–"],
    16: ["çªç„¶å˜åŒ–", "è§‰é†’", "è§£æ”¾", "å¯ç¤º", "ç ´å"],
    17: ["å¸Œæœ›", "çµæ„Ÿ", "æŒ‡å¼•", "å¹³é™", "ä¿¡ä»°"],
    18: ["å¹»è±¡", "ç›´è§‰", "æ½œæ„è¯†", "ææƒ§", "è¿·æƒ‘"],
    19: ["æˆåŠŸ", "å–œæ‚¦", "æ´»åŠ›", "ä¹è§‚", "æˆå°±"],
    20: ["è§‰é†’", "é‡ç”Ÿ", "å®½æ•", "å†…åœ¨å‘¼å”¤", "åˆ¤æ–­"],
    21: ["å®Œæˆ", "æˆå°±", "æ—…ç¨‹ç»“æŸ", "åœ†æ»¡", "æˆåŠŸ"]
  };
  return majorKeywords[index] || [];
}

// è·å–èŠ±è‰²å¯¹åº”çš„è‹±æ–‡å…ƒç´ 
function getSuitElement(suit) {
  const suitElements = {
    'wands': 'fire',
    'cups': 'water', 
    'swords': 'air',
    'pentacles': 'earth'
  };
  return suitElements[suit] || 'earth';
}

// è·å–å°é˜¿å°”å¡çº³å…³é”®è¯
function getKeywordsForMinor(suit, number) {
  const suitKeywords = {
    wands: {
      1: ["æ–°å¼€å§‹", "åˆ›æ„", "çµæ„Ÿ", "æ½œåŠ›", "æœºä¼š"],
      2: ["è®¡åˆ’", "è¿œè§", "æ§åˆ¶", "ä¸ªäººåŠ›é‡", "æœªæ¥"],
      3: ["æ‰©å±•", "è¿œè§", "é¢†å¯¼", "åˆä½œ", "è´¸æ˜“"],
      4: ["åº†ç¥", "å’Œè°", "ç¨³å®š", "å®¶åº­", "æˆå°±"],
      5: ["ç«äº‰", "å†²çª", "æŒ‘æˆ˜", "åˆ†æ­§", "æ··ä¹±"],
      6: ["èƒœåˆ©", "æˆåŠŸ", "è®¤å¯", "è¿›æ­¥", "è‡ªä¿¡"],
      7: ["æŒ‘æˆ˜", "ç«äº‰", "åšæŒ", "å‹‡æ°”", "é˜²å¾¡"],
      8: ["å¿«é€Ÿè¡ŒåŠ¨", "è¿›å±•", "æ¶ˆæ¯", "æ—…è¡Œ", "æ€¥é€Ÿ"],
      9: ["åšæŒ", "éŸ§æ€§", "é˜²å¾¡", "æ¯…åŠ›", "è¾¹ç•Œ"],
      10: ["è´Ÿæ‹…", "è´£ä»»", "å‹åŠ›", "æˆåŠŸ", "ç›®æ ‡"],
      11: ["å†²åŠ¨", "å†’é™©", "çƒ­æƒ…", "é²è½", "è¡ŒåŠ¨"],
      12: ["åˆ›é€ åŠ›", "çƒ­æƒ…", "è‡ªä¿¡", "æ…·æ…¨", "æ¸©æš–"],
      13: ["é¢†å¯¼", "è¿œè§", "æˆç†Ÿ", "æ§åˆ¶", "ä¼ä¸šå®¶ç²¾ç¥"],
      14: ["çƒ­æƒ…", "å†²åŠ¨", "å­¦ä¹ ", "æ¶ˆæ¯", "æ–°æƒ³æ³•"]
    },
    cups: {
      1: ["æ–°çˆ±æƒ…", "æƒ…æ„Ÿå¼€å§‹", "ç›´è§‰", "çµæ€§", "åˆ›é€ åŠ›"],
      2: ["ä¼™ä¼´å…³ç³»", "çˆ±æƒ…", "å‹è°Š", "åˆä½œ", "å¹³è¡¡"],
      3: ["å‹è°Š", "åº†ç¥", "åˆ›é€ åŠ›", "åˆä½œ", "ç¤¾åŒº"],
      4: ["å†·æ¼ ", "æ²‰æ€", "é‡æ–°è¯„ä¼°", "å†…çœ", "ä¸æ»¡"],
      5: ["å¤±æœ›", "æ‚²ä¼¤", "åæ‚”", "å¤±è½", "ä¸“æ³¨å‰©ä½™"],
      6: ["æ€€æ—§", "ç«¥å¹´", "çº¯çœŸ", "å¿«ä¹å›å¿†", "ç»™äºˆ"],
      7: ["å¹»æƒ³", "é€‰æ‹©", "æ„¿æœ›", "æƒ³è±¡", "æœºä¼š"],
      8: ["æ”¾å¼ƒ", "å¯»æ‰¾", "å¤±æœ›", "æ’¤é€€", "å†…å¿ƒå¬å”¤"],
      9: ["æ»¡è¶³", "å¹¸ç¦", "æ„¿æœ›æˆçœŸ", "æ„Ÿæ©", "å¥¢å"],
      10: ["å¹¸ç¦", "å’Œè°", "æƒ…æ„Ÿæ»¡è¶³", "å®¶åº­", "å…³ç³»"],
      11: ["æµªæ¼«", "ç†æƒ³ä¸»ä¹‰", "æ•æ„Ÿ", "åˆ›é€ åŠ›", "ç›´è§‰"],
      12: ["ç›´è§‰", "æƒ…æ„Ÿæˆç†Ÿ", "åŒæƒ…", "å¹³é™", "å†…åœ¨çŸ¥è¯†"],
      13: ["æƒ…æ„Ÿå¹³è¡¡", "åŒæƒ…", "å¤–äº¤", "å†·é™", "æ…·æ…¨"],
      14: ["æƒ…æ„Ÿæ–°å¼€å§‹", "åˆ›é€ åŠ›", "ç›´è§‰", "è‰ºæœ¯", "æ•æ„Ÿ"]
    },
    swords: {
      1: ["æ–°æƒ³æ³•", "å¿ƒç†æ¸…æ™°", "çªç ´", "æ²Ÿé€š", "çœŸç›¸"],
      2: ["å›°éš¾å†³å®š", "å¹³è¡¡", "åƒµå±€", "é€‰æ‹©", "å’Œå¹³"],
      3: ["å¿ƒç¢", "æ‚²ä¼¤", "ç—›è‹¦", "åˆ†ç¦»", "æ‚²ä¼¤"],
      4: ["ä¼‘æ¯", "æ²‰æ€", "æ¢å¤", "å’Œå¹³", "é™æ­¢"],
      5: ["å†²çª", "å¤±è´¥", "ä¸å’Œè°", "å¤±è´¥", "ç¾è€»"],
      6: ["è¿‡æ¸¡", "æ”¹å˜", "æ—…è¡Œ", "æ¬å®¶", "æ¢å¤"],
      7: ["æ¬ºéª—", "ç­–ç•¥", "å·çªƒ", "é€ƒé¿", "å•ç‹¬è¡ŒåŠ¨"],
      8: ["é™åˆ¶", "æŸç¼š", "å—å®³è€…å¿ƒæ€", "æ— åŠ›", "å›°å¢ƒ"],
      9: ["ç„¦è™‘", "æ‹…å¿§", "ææƒ§", "å™©æ¢¦", "å†…ç–š"],
      10: ["èƒŒå›", "ç—›è‹¦", "å¤±è´¥", "ç»“æŸ", "åº•éƒ¨"],
      11: ["å†²åŠ¨", "é²è½", "ä¸è€çƒ¦", "ç¼ºä¹æ–¹å‘", "è¡ŒåŠ¨"],
      12: ["ç‹¬ç«‹", "åšå¼º", "ç›´æ¥", "å…¬æ­£", "æ¸…æ™°"],
      13: ["æƒå¨", "æ¸…æ™°æ€ç»´", "æ™ºåŠ›åŠ›é‡", "çœŸç›¸", "å…¬æ­£"],
      14: ["å¥½å¥‡", "æ¸´æœ›å­¦ä¹ ", "æ–°æƒ³æ³•", "æ²Ÿé€š", "è­¦è§‰"]
    },
    pentacles: {
      1: ["æ–°æœºä¼š", "è¡¨ç°", "æ–°å·¥ä½œ", "é‡‘é’±", "å¥åº·"],
      2: ["å¹³è¡¡", "é€‚åº”æ€§", "æ—¶é—´ç®¡ç†", "ä¼˜å…ˆçº§", "çµæ´»æ€§"],
      3: ["å›¢é˜Ÿåˆä½œ", "å­¦ä¹ ", "å®æ–½", "å»ºè®¾", "åˆä½œ"],
      4: ["å®‰å…¨", "æ§åˆ¶", "ä¿å®ˆ", "å æœ‰", "ç¨³å®š"],
      5: ["ç»æµå›°éš¾", "ä¸å®‰å…¨", "æ‹…å¿§", "å­¤ç«‹", "å¤±ä¸š"],
      6: ["æ…·æ…¨", "åˆ†äº«", "å…¬å¹³", "ç¤¾åŒº", "æ„Ÿæ©"],
      7: ["é•¿æœŸè§†é‡", "æ¯…åŠ›", "æŠ•èµ„", "åŠªåŠ›å·¥ä½œ", "è¿›å±•"],
      8: ["æŠ€èƒ½å‘å±•", "å‹¤å¥‹", "ç†Ÿç»ƒ", "è´¨é‡", "ç»†èŠ‚"],
      9: ["ç‹¬ç«‹", "è‡ªç»™è‡ªè¶³", "å¥¢å", "æˆåŠŸ", "æˆå°±"],
      10: ["è´¢å¯Œ", "é—äº§", "å®¶åº­", "å»ºç«‹", "é•¿æœŸæˆåŠŸ"],
      11: ["å®ç”¨", "å¯é ", "åŠªåŠ›å·¥ä½œ", "æ‰¿è¯º", "å¸¸è¯†"],
      12: ["å®ç”¨", "æ…·æ…¨", "å®‰å…¨", "ç‹¬ç«‹", "èµ„æºä¸°å¯Œ"],
      13: ["æˆåŠŸ", "é¢†å¯¼", "å®‰å…¨", "çºªå¾‹", "æ§åˆ¶"],
      14: ["é›„å¿ƒ", "æ¸´æœ›", "å‹¤å¥‹", "ç›®æ ‡", "è¡¨ç°"]
    }
  };
  return suitKeywords[suit]?.[number] || [];
}

// ç”ŸæˆTypeScriptæ–‡ä»¶å†…å®¹
function generateTypeScriptFile(cards) {
  const content = `/**
 * åŒ…å«æ•…äº‹åŒ–è§£è¯»çš„å®Œæ•´78å¼ å¡”ç½—ç‰Œæ•°æ®
 * æ¯å¼ ç‰Œéƒ½æœ‰ç‹¬ç‰¹çš„ã€å¯Œæœ‰ç”»é¢æ„Ÿå’Œæ•…äº‹æ€§çš„å›ºå®šè§£è¯»
 * ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}
 */

export interface StoryTarotCard {
  id: number;
  name: string;
  chineseName: string;
  category: 'major' | 'minor';
  suit?: 'wands' | 'cups' | 'swords' | 'pentacles';
  number?: number;
  keywords: string[];
  element: 'fire' | 'water' | 'air' | 'earth';
  storyInterpretation: string;
  imageUrl: string;
}

export const storyTarotDeck: StoryTarotCard[] = ${JSON.stringify(cards, null, 2)};

// å·¥å…·å‡½æ•°
export function getStoryCardById(id: number): StoryTarotCard | undefined {
  return storyTarotDeck.find(card => card.id === id);
}

export function getStoryCardsByCategory(category: 'major' | 'minor'): StoryTarotCard[] {
  return storyTarotDeck.filter(card => card.category === category);
}

export function getStoryCardsBySuit(suit: 'wands' | 'cups' | 'swords' | 'pentacles'): StoryTarotCard[] {
  return storyTarotDeck.filter(card => card.suit === suit);
}

export function shuffleStoryDeck(): StoryTarotCard[] {
  const shuffled = [...storyTarotDeck];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

export function drawStoryCards(count: number): StoryTarotCard[] {
  const shuffled = shuffleStoryDeck();
  return shuffled.slice(0, count);
}

export function validateStoryTarotDeck(): { 
  isComplete: boolean; 
  missing: string[]; 
  total: number;
  majorCount: number;
  minorCount: number;
  storiesCount: number;
} {
  const missing: string[] = [];
  const majorCards = getStoryCardsByCategory('major');
  const minorCards = getStoryCardsByCategory('minor');
  const cardsWithStories = storyTarotDeck.filter(card => card.storyInterpretation && card.storyInterpretation.length > 0);
  
  // æ£€æŸ¥å¤§é˜¿å°”å¡çº³ (åº”è¯¥æœ‰22å¼ )
  if (majorCards.length !== 22) {
    missing.push(\`å¤§é˜¿å°”å¡çº³ç¼ºå¤±: åº”æœ‰22å¼ ï¼Œå®é™…\${majorCards.length}å¼ \`);
  }
  
  // æ£€æŸ¥å°é˜¿å°”å¡çº³ (åº”è¯¥æœ‰56å¼ )
  if (minorCards.length !== 56) {
    missing.push(\`å°é˜¿å°”å¡çº³ç¼ºå¤±: åº”æœ‰56å¼ ï¼Œå®é™…\${minorCards.length}å¼ \`);
  }
  
  // æ£€æŸ¥æ•…äº‹è§£è¯»
  if (cardsWithStories.length !== 78) {
    missing.push(\`æ•…äº‹è§£è¯»ç¼ºå¤±: åº”æœ‰78ä¸ªï¼Œå®é™…\${cardsWithStories.length}ä¸ª\`);
  }
  
  return {
    isComplete: missing.length === 0,
    missing,
    total: storyTarotDeck.length,
    majorCount: majorCards.length,
    minorCount: minorCards.length,
    storiesCount: cardsWithStories.length
  };
}

// è·å–éšæœºæ•…äº‹è§£è¯»
export function getRandomStoryInterpretation(): string {
  const randomCard = storyTarotDeck[Math.floor(Math.random() * storyTarotDeck.length)];
  return randomCard.storyInterpretation;
}

// æŒ‰å…ƒç´ åˆ†ç»„
export function getStoryCardsByElement(element: 'fire' | 'water' | 'air' | 'earth'): StoryTarotCard[] {
  return storyTarotDeck.filter(card => card.element === element);
}
`;

  return content;
}

// ä¸»å‡½æ•°
function main() {
  console.log('ğŸ¨ å¼€å§‹ç”Ÿæˆæ•…äº‹åŒ–å¡”ç½—ç‰Œæ•°æ®...');
  
  try {
    // ç”Ÿæˆæ•°æ®
    const cards = generateStoryTarotData();
    console.log(`âœ… æˆåŠŸç”Ÿæˆ ${cards.length} å¼ å¡”ç½—ç‰Œæ•°æ®`);
    
    // ç”ŸæˆTypeScriptæ–‡ä»¶
    const tsContent = generateTypeScriptFile(cards);
    const outputPath = path.join(__dirname, '..', 'src', 'features', 'tarot', 'utils', 'storyTarotData.ts');
    
    // ç¡®ä¿ç›®å½•å­˜åœ¨
    const dir = path.dirname(outputPath);
    if (!fs.existsSync(dir)) {
      fs.mkdirSync(dir, { recursive: true });
    }
    
    // å†™å…¥æ–‡ä»¶
    fs.writeFileSync(outputPath, tsContent, 'utf8');
    console.log(`ğŸ“ æ•°æ®æ–‡ä»¶å·²ç”Ÿæˆ: ${outputPath}`);
    
    // éªŒè¯æ•°æ®
    const majorCount = cards.filter(c => c.category === 'major').length;
    const minorCount = cards.filter(c => c.category === 'minor').length;
    const storiesCount = cards.filter(c => c.storyInterpretation && c.storyInterpretation.length > 0).length;
    
    console.log('\nğŸ“Š æ•°æ®ç»Ÿè®¡:');
    console.log(`  æ€»ç‰Œæ•°: ${cards.length}/78`);
    console.log(`  å¤§é˜¿å°”å¡çº³: ${majorCount}/22`);
    console.log(`  å°é˜¿å°”å¡çº³: ${minorCount}/56`);
    console.log(`  æ•…äº‹è§£è¯»: ${storiesCount}/78`);
    
    if (cards.length === 78 && majorCount === 22 && minorCount === 56 && storiesCount === 78) {
      console.log('\nğŸ‰ æ‰€æœ‰æ•°æ®ç”Ÿæˆå®Œæˆï¼æ¯å¼ ç‰Œéƒ½æœ‰ç‹¬ç‰¹çš„æ•…äº‹åŒ–è§£è¯»ã€‚');
    } else {
      console.log('\nâš ï¸ æ•°æ®å¯èƒ½ä¸å®Œæ•´ï¼Œè¯·æ£€æŸ¥ã€‚');
    }
    
  } catch (error) {
    console.error('âŒ ç”Ÿæˆè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:', error);
    process.exit(1);
  }
}

// è¿è¡Œè„šæœ¬
if (require.main === module) {
  main();
}

module.exports = { generateStoryTarotData, generateTypeScriptFile };