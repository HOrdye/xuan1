---
description: 
globs: 
alwaysApply: false
---
# 代码修复规则 (Code Fix Rules)

## 🚫 绝对禁止 (NEVER DO)
1. **禁止删除整个文件重建** - 除非文件完全损坏且无法修复
2. **禁止对语法错误使用删除策略** - 语法错误应该精确修复
3. **禁止在不确定能重建的情况下删除文件** - 必须确保能100%恢复内容

## ✅ 必须遵循 (MUST FOLLOW)
1. **语法错误修复流程**：
   - 使用TypeScript编译器精确定位错误位置
   - 使用search_replace针对具体行修复
   - 立即验证修复结果
   
2. **文件修复优先级**：
   - 第一优先：查找.backup文件
   - 第二优先：使用search_replace精确修复
   - 最后选择：分段edit_file修复
   
3. **错误处理原则**：
   - 缺少大括号 → 添加大括号
   - 模板字符串未闭合 → 添加闭合标记
   - 函数未完整 → 补全函数体
   - 绝不删除重建

## 🔧 具体操作规则
1. **发现语法错误时**：
   ```bash
   npx tsc --noEmit filename.ts  # 精确定位
   # 然后使用search_replace修复具体行
   ```

2. **工具失效时的降级方案**：
   - search_replace失效 → edit_file分段修复
   - edit_file失效 → 检查是否有备份文件
   - 有备份文件 → 立即使用copy命令恢复

3. **修复验证流程**：
   - 每次修复后立即运行TypeScript检查
   - 确认无语法错误后再继续下一步
   - 保持增量修复，避免大批量更改

## ⚠️ 警告标识
- 当想要删除文件时 → 🛑 STOP! 寻找其他方案
- 当语法错误超过10行时 → 🔍 查找备份文件

- 当工具连续失效时 → 📋 切换到手动精确修复模式