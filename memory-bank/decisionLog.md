# Decision Log

- [2025-05-12 15:03:00] - Decision to create memory-bank directory and initialize core files for context tracking and project management.
- [2024-06-04 10:00:00] - 决定采用"用户参与+时间混合法"生成卦象，提升占卜真实感和仪式感；解卦部分融合本地六十四卦卦辞、变卦、爻辞与LLM（大模型）智能建议，确保建议有逻辑、有可信度且个性化。具体技术方案如下：

## 技术方案概要

### 1. 卦象生成
- 收集用户输入（问题、选项、生日）、当前时间、用户操作行为（如点击时长、顺序等）
- 拼接所有数据，哈希为整数种子
- 用种子驱动伪随机数生成器，模拟铜钱法概率生成六爻
- 过程可动画展示，增强仪式感

### 2. 智能解卦
- 本地查找本卦、变卦、爻辞等基础数据，结构化输出
- 组装结构化prompt，调用LLM（如DeepSeek、OpenAI）API，要求结合卦辞、变卦、用户问题输出有逻辑、有依据的建议
- UI分区展示"传统卦辞解读"与"AI大师建议"，提升可信度
- 若LLM不可用，自动用本地模板+卦辞+爻辞拼接生成建议，保证体验不中断

### 3. 其他
- 本地完善六十四卦卦辞、象辞、爻辞数据库
- 前端/后端分工明确，API接口标准化
- 用户引导与可信度提示优化

## 近期决策

### 笅杯占卜功能优化
- [2024-06-10 14:30:00] - 决定使用Anime.js的高级特性实现笅杯动画，包括：
  - 使用物理引擎模拟笅杯的运动轨迹
  - 添加碰撞检测和反弹效果
  - 实现更真实的落地动画
  - 优化动画性能，确保在低端设备上的流畅运行

### 今日运势模块改进
- [2024-06-10 14:30:00] - 决定优化运势生成算法，包括：
  - 结合用户生日信息生成个性化运势
  - 增加运势分项（事业、财运、健康等）
  - 添加宜忌事项建议
  - 实现运势历史记录功能

### UI/UX优化
- [2024-06-10 14:30:00] - 决定统一设计语言，包括：
  - 建立统一的设计系统
  - 优化动画和过渡效果
  - 改进移动端适配
  - 增加结果分享功能
